# ç™»å½•æ¥å£æµ‹è¯•æ–‡æ¡£

## ğŸ“¡ æ¥å£ä¿¡æ¯

### åŸºæœ¬ä¿¡æ¯
- **æ¥å£åœ°å€**: `http://localhost:8801/login/login`
- **è¯·æ±‚æ–¹å¼**: `POST`
- **Content-Type**: `application/json`
- **è®¤è¯è¦æ±‚**: æ— éœ€è®¤è¯ï¼ˆ@NoAuthï¼‰

## ğŸ“¤ è¯·æ±‚æ ¼å¼

### è¯·æ±‚å¤´ (Headers)
```
Content-Type: application/json
```

### è¯·æ±‚ä½“ (Body - JSON)
```json
{
  "email": "admin@example.com",
  "password": "123456"
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `email`: é‚®ç®±ï¼ˆå¿…å¡«ï¼Œéœ€ç¬¦åˆé‚®ç®±æ ¼å¼ï¼‰
- `password`: å¯†ç ï¼ˆå¿…å¡«ï¼Œ6-20ä¸ªå­—ç¬¦ï¼‰

### å®Œæ•´çš„ curl å‘½ä»¤
```bash
curl -X POST http://localhost:8801/admin/login/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "123456"
  }'
```

## ğŸ“¥ å“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "code": 200,
  "message": "success",
  "data": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTY..."
}
```

### å¤±è´¥å“åº”
```json
{
  "code": 401,
  "message": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
  "data": null
}
```

## ğŸ”§ å‰ç«¯é…ç½®

### 1. API æ¥å£å®šä¹‰ (src/api/login.js)
```javascript
import request from '@/utils/request'

export function login(data) {
  return request({
    url: '/login/login',
    method: 'post',
    data  // è‡ªåŠ¨è½¬æ¢ä¸º JSON
  })
}
```

### 2. Axios é…ç½® (src/utils/request.js)
```javascript
const service = axios.create({
  baseURL: '/api',  // é€šè¿‡ä»£ç†è½¬å‘
  timeout: 15000,
  headers: {
    'Content-Type': 'application/json;charset=utf-8'  // JSON æ ¼å¼
  }
})
```

### 3. Vite ä»£ç†é…ç½® (vite.config.js)
```javascript
proxy: {
  '/api': {
    target: 'http://localhost:8801',  // åç«¯æœåŠ¡å™¨
    changeOrigin: true,
    rewrite: (path) => path.replace(/^\/api/, '')
  }
}
```

## ğŸ¯ å‰ç«¯è°ƒç”¨ç¤ºä¾‹

### Vue ç»„ä»¶ä¸­è°ƒç”¨
```javascript
import { login } from '@/api/login'

// æ–¹å¼1: async/await
async function handleLogin() {
  try {
    const token = await login({
      username: 'admin',
      password: '123456'
    })
    console.log('ç™»å½•æˆåŠŸï¼Œtoken:', token)
  } catch (error) {
    console.error('ç™»å½•å¤±è´¥:', error)
  }
}

// æ–¹å¼2: Promise
login({
  username: 'admin',
  password: '123456'
})
.then(token => {
  console.log('ç™»å½•æˆåŠŸï¼Œtoken:', token)
})
.catch(error => {
  console.error('ç™»å½•å¤±è´¥:', error)
})
```

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### æ–¹æ³•1: ä½¿ç”¨ Postman

1. **åˆ›å»ºæ–°è¯·æ±‚**
   - Method: `POST`
   - URL: `http://localhost:8801/login/login`

2. **è®¾ç½®è¯·æ±‚å¤´**
   ```
   Content-Type: application/json
   ```

3. **è®¾ç½®è¯·æ±‚ä½“ (Body â†’ raw â†’ JSON)**
   ```json
   {
     "username": "admin",
     "password": "123456"
   }
   ```

4. **ç‚¹å‡» Send å‘é€è¯·æ±‚**

### æ–¹æ³•2: ä½¿ç”¨ curl å‘½ä»¤

```bash
# Windows PowerShell
curl.exe -X POST http://localhost:8801/login/login `
  -H "Content-Type: application/json" `
  -d '{"username":"admin","password":"123456"}'

# Linux/Mac
curl -X POST http://localhost:8801/login/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"123456"}'
```

### æ–¹æ³•3: æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. æ‰“å¼€å‰ç«¯é¡µé¢ `http://localhost:3000`
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ° Network æ ‡ç­¾
4. è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œç‚¹å‡»ç™»å½•
5. æŸ¥çœ‹ `login` è¯·æ±‚è¯¦æƒ…

**æŸ¥çœ‹è¯·æ±‚ä¿¡æ¯**ï¼š
- Request Headers â†’ Content-Type: application/json
- Request Payload â†’ å¯ä»¥çœ‹åˆ° JSON æ•°æ®
- Response â†’ æŸ¥çœ‹è¿”å›çš„æ•°æ®

### æ–¹æ³•4: ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°

```javascript
// æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç 

// æµ‹è¯•ç™»å½•æ¥å£
fetch('http://localhost:8801/login/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    username: 'admin',
    password: '123456'
  })
})
.then(res => res.json())
.then(data => {
  console.log('å“åº”æ•°æ®:', data)
  if (data.code === 200) {
    console.log('ç™»å½•æˆåŠŸ! Token:', data.data)
  } else {
    console.log('ç™»å½•å¤±è´¥:', data.message)
  }
})
.catch(error => {
  console.error('è¯·æ±‚é”™è¯¯:', error)
})
```

## ğŸ” è¯·æ±‚æµç¨‹åˆ†æ

### å‰ç«¯è¯·æ±‚æµç¨‹
```
1. ç”¨æˆ·ç‚¹å‡»ç™»å½•æŒ‰é’®
   â†“
2. è°ƒç”¨ login({ username, password })
   â†“
3. request.js æ‹¦æˆªå™¨å¤„ç†
   â†“
4. å‘é€ POST è¯·æ±‚åˆ° /api/login/login
   â†“
5. Vite ä»£ç†è½¬å‘åˆ° http://localhost:8801/login/login
   â†“
6. åç«¯ Spring Boot æ¥æ”¶å¤„ç†
   â†“
7. è¿”å› Result<String> (token)
   â†“
8. å‰ç«¯æ¥æ”¶å“åº”
   â†“
9. ä¿å­˜ token åˆ° localStorage
   â†“
10. è·³è½¬åˆ°é¦–é¡µ
```

### è¯·æ±‚æ•°æ®æ ¼å¼
```javascript
// å‰ç«¯å‘é€
{
  username: 'admin',
  password: '123456'
}

// è½¬æ¢ä¸º JSON
"{"username":"admin","password":"123456"}"

// HTTP è¯·æ±‚ä½“
POST /login/login HTTP/1.1
Host: localhost:8801
Content-Type: application/json
Content-Length: 47

{"username":"admin","password":"123456"}
```

## ğŸ“ åç«¯æ¥å£å¯¹åº”

### Spring Boot Controller
```java
@RestController
@RequestMapping("/login")
@RequiredArgsConstructor
public class LoginController {

    private final LoginService loginService;

    @PostMapping("/login")
    @NoAuth
    public Result<String> login(@Valid @RequestBody LoginRequest request) {
        String token = loginService.login(request);
        return Result.success(token);
    }
}
```

### LoginRequest å®ä½“ç±»
```java
@Data
public class LoginRequest {
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    private String email;
    
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Size(min = 6, max = 20, message = "å¯†ç é•¿åº¦åº”åœ¨6-20ä¸ªå­—ç¬¦ä¹‹é—´")
    private String password;
}
```

### Result å“åº”æ ¼å¼
```java
@Data
public class Result<T> {
    private Integer code;
    private String message;
    private T data;
}
```

## âš ï¸ å¸¸è§é—®é¢˜

### 1. è¯·æ±‚å‘é€ä½†åç«¯æœªæ”¶åˆ°
**æ£€æŸ¥é¡¹**ï¼š
- âœ… åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼ˆ8801ç«¯å£ï¼‰
- âœ… Vite ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®
- âœ… é˜²ç«å¢™æ˜¯å¦é˜»æ­¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥åç«¯ç«¯å£
netstat -ano | findstr "8801"

# é‡å¯å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 2. Content-Type ä¸æ˜¯ JSON
**æ£€æŸ¥**ï¼š
- request.js ä¸­çš„ headers é…ç½®
- ç¡®ä¿è®¾ç½®äº† `'Content-Type': 'application/json'`

### 3. è·¨åŸŸé—®é¢˜
**ç°è±¡**ï¼š
```
Access to fetch at 'http://localhost:8801/login/login' 
from origin 'http://localhost:3000' has been blocked by CORS
```

**è§£å†³**ï¼š
- âœ… å·²é…ç½® Vite ä»£ç†ï¼Œé€šè¿‡ `/api` è®¿é—®
- âœ… å‰ç«¯è¯·æ±‚ `/api/login/login` è€Œä¸æ˜¯ç›´æ¥è¯·æ±‚ `http://localhost:8801`

### 4. è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯
**é”™è¯¯ç¤ºä¾‹**ï¼š
```javascript
// âŒ é”™è¯¯ï¼šç›´æ¥ä¼ å­—ç¬¦ä¸²
login('admin', '123456')

// âœ… æ­£ç¡®ï¼šä¼ å¯¹è±¡
login({ username: 'admin', password: '123456' })
```

## ğŸ“Š è¯·æ±‚ç›‘æ§

### Chrome DevTools Network
1. æ‰“å¼€ DevTools (F12)
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. å‹¾é€‰ "Preserve log"
4. æ‰§è¡Œç™»å½•æ“ä½œ

**æŸ¥çœ‹å†…å®¹**ï¼š
- General â†’ Request URL, Method
- Request Headers â†’ Content-Type
- Request Payload â†’ JSON æ•°æ®
- Response â†’ è¿”å›æ•°æ®

### Axios è¯·æ±‚æ—¥å¿—
å¯ä»¥åœ¨ request.js ä¸­æ·»åŠ æ—¥å¿—ï¼š
```javascript
service.interceptors.request.use(config => {
  console.log('ğŸ“¤ å‘é€è¯·æ±‚:', config.method.toUpperCase(), config.url)
  console.log('ğŸ“¦ è¯·æ±‚æ•°æ®:', config.data)
  return config
})

service.interceptors.response.use(response => {
  console.log('ğŸ“¥ æ”¶åˆ°å“åº”:', response.config.url)
  console.log('ğŸ“‹ å“åº”æ•°æ®:', response.data)
  return response.data
})
```

## âœ… éªŒè¯æ¸…å•

ç™»å½•æ¥å£æµ‹è¯•å‰çš„æ£€æŸ¥é¡¹ï¼š

- [ ] åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆç«¯å£ 8801ï¼‰
- [ ] å‰ç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆç«¯å£ 3000ï¼‰
- [ ] Vite ä»£ç†é…ç½®æ­£ç¡®
- [ ] Content-Type è®¾ç½®ä¸º application/json
- [ ] è¯·æ±‚ä½“æ ¼å¼ä¸º JSON å¯¹è±¡
- [ ] ç”¨æˆ·åå¯†ç ç¬¦åˆåç«¯éªŒè¯è§„åˆ™
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸

---

## ğŸ¯ å¿«é€Ÿæµ‹è¯•

### 1åˆ†é’Ÿå¿«é€Ÿæµ‹è¯•æ­¥éª¤

```bash
# 1. å¯åŠ¨åç«¯ï¼ˆç¡®ä¿åœ¨ 8801 ç«¯å£ï¼‰
# åç«¯é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ
./mvnw spring-boot:run

# 2. å¯åŠ¨å‰ç«¯
# å‰ç«¯é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ
npm run dev

# 3. æ‰“å¼€æµè§ˆå™¨
http://localhost:3000

# 4. è¾“å…¥è´¦å·å¯†ç 
ç”¨æˆ·å: admin
å¯†ç : 123456

# 5. ç‚¹å‡»ç™»å½•ï¼ŒæŸ¥çœ‹æ•ˆæœ
```

**æˆåŠŸæ ‡å¿—**ï¼š
âœ… æç¤º"ç™»å½•æˆåŠŸï¼"
âœ… è·³è½¬åˆ°é¦–é¡µ
âœ… localStorage ä¸­æœ‰ token

---

**æ¥å£é…ç½®å®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•äº†ï¼** ğŸš€

