# ç”¨æˆ·ä¿¡æ¯æ•°æ®ç»“æ„è¯´æ˜

## ğŸ“‹ åç«¯è¿”å›çš„ç”¨æˆ·ä¿¡æ¯

### æ•°æ®ç»“æ„
```javascript
{
  id: 5,                    // ç”¨æˆ·ID
  username: "xhonell",      // ç”¨æˆ·å
  email: "xhonell@163.com", // é‚®ç®±
  phone: "18996459789",     // æ‰‹æœºå·
  avatarId: 11,             // å¤´åƒID
  avatarUrl: "https://pe-1329896228.cos.ap-chengdu.myqcloud.com/images/3bf592d79f9d4c049d00ecf3b6dd83c2.jpg", // å¤´åƒURL
  role: 2,                  // è§’è‰²ï¼ˆ1:ç®¡ç†å‘˜, 2:æ™®é€šç”¨æˆ·ï¼‰
  status: false,            // è´¦å·çŠ¶æ€ï¼ˆtrue:å¯ç”¨, false:ç¦ç”¨ï¼‰
  createTime: "2025-10-19T23:16:01",   // åˆ›å»ºæ—¶é—´
  updateTime: "2025-10-19T23:16:34"    // æ›´æ–°æ—¶é—´
}
```

## ğŸ” å­—æ®µè¯´æ˜

### åŸºæœ¬ä¿¡æ¯
| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| id | number | ç”¨æˆ·å”¯ä¸€æ ‡è¯† | 5 |
| username | string | ç”¨æˆ·å | xhonell |
| email | string | é‚®ç®±åœ°å€ | xhonell@163.com |
| phone | string | æ‰‹æœºå·ç  | 18996459789 |

### å¤´åƒä¿¡æ¯
| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| avatarId | number | å¤´åƒIDï¼ˆå…³è”å¤´åƒè¡¨ï¼‰ | 11 |
| avatarUrl | string | å¤´åƒURLï¼ˆå®Œæ•´åœ°å€ï¼‰ | https://... |

### æƒé™ä¿¡æ¯
| å­—æ®µ | ç±»å‹ | è¯´æ˜ | å¯é€‰å€¼ |
|------|------|------|--------|
| role | number | ç”¨æˆ·è§’è‰² | 1:ç®¡ç†å‘˜, 2:æ™®é€šç”¨æˆ· |
| status | boolean | è´¦å·çŠ¶æ€ | true:å¯ç”¨, false:ç¦ç”¨ |

### æ—¶é—´ä¿¡æ¯
| å­—æ®µ | ç±»å‹ | è¯´æ˜ | æ ¼å¼ |
|------|------|------|------|
| createTime | string | åˆ›å»ºæ—¶é—´ | ISO 8601 æ ¼å¼ |
| updateTime | string | æ›´æ–°æ—¶é—´ | ISO 8601 æ ¼å¼ |

## ğŸ’» å‰ç«¯ä½¿ç”¨

### 1. è·å–ç”¨æˆ·ä¿¡æ¯
```javascript
import { getUserInfo } from '@/api/login'

// ç™»å½•åè·å–
const userInfo = await getUserInfo()

// ä¿å­˜åˆ° localStorage
localStorage.setItem('userInfo', JSON.stringify(userInfo))

// è¯»å–
const userInfoStr = localStorage.getItem('userInfo')
const userInfo = JSON.parse(userInfoStr)
```

### 2. æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
```vue
<el-avatar :src="userInfo.avatarUrl" :size="36" />
```

### 3. æ˜¾ç¤ºç”¨æˆ·å
```vue
<span>{{ userInfo.username }}</span>
```

### 4. æ˜¾ç¤ºé‚®ç®±
```vue
<span>{{ userInfo.email }}</span>
```

### 5. åˆ¤æ–­è§’è‰²
```javascript
import { isAdmin, getRoleName } from '@/types/user'

// æ˜¯å¦ä¸ºç®¡ç†å‘˜
if (isAdmin(userInfo.role)) {
  console.log('ç”¨æˆ·æ˜¯ç®¡ç†å‘˜')
}

// è·å–è§’è‰²åç§°
const roleName = getRoleName(userInfo.role) // "æ™®é€šç”¨æˆ·"
```

### 6. æ˜¾ç¤ºè´¦å·çŠ¶æ€
```vue
<el-tag :type="userInfo.status ? 'success' : 'danger'">
  {{ userInfo.status ? 'æ­£å¸¸' : 'ç¦ç”¨' }}
</el-tag>
```

### 7. æ ¼å¼åŒ–æ—¶é—´
```javascript
import { formatTime } from '@/types/user'

const time = formatTime(userInfo.createTime)
// "2025-10-19 23:16"
```

## ğŸ¨ å¸ƒå±€ä¸­çš„åº”ç”¨

### é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯
```vue
<template>
  <div class="user-info">
    <!-- å¤´åƒ -->
    <el-avatar :size="36" :src="userAvatar" />
    
    <!-- ç”¨æˆ·å -->
    <span class="username">{{ userDisplayName }}</span>
    
    <!-- ä¸‹æ‹‰èœå• -->
    <el-dropdown>
      <el-icon><ArrowDown /></el-icon>
      <template #dropdown>
        <el-dropdown-menu>
          <!-- ç”¨æˆ·ä¿¡æ¯ -->
          <el-dropdown-item disabled>
            <div>{{ userInfo.username }}</div>
            <div>{{ userInfo.email }}</div>
          </el-dropdown-item>
          <!-- èœå•é¡¹ -->
          <el-dropdown-item command="profile">ä¸ªäººä¸­å¿ƒ</el-dropdown-item>
          <el-dropdown-item command="logout">é€€å‡ºç™»å½•</el-dropdown-item>
        </el-dropdown-menu>
      </template>
    </el-dropdown>
  </div>
</template>

<script>
import { computed, ref } from 'vue'

export default {
  setup() {
    const userInfo = ref({})
    
    // è¯»å–ç”¨æˆ·ä¿¡æ¯
    const getUserInfoFromStorage = () => {
      const userInfoStr = localStorage.getItem('userInfo')
      if (userInfoStr) {
        userInfo.value = JSON.parse(userInfoStr)
      }
    }
    
    // å¤´åƒURL
    const userAvatar = computed(() => {
      return userInfo.value.avatarUrl || 'é»˜è®¤å¤´åƒURL'
    })
    
    // æ˜¾ç¤ºåç§°
    const userDisplayName = computed(() => {
      return userInfo.value.username || 'æœªç™»å½•'
    })
    
    getUserInfoFromStorage()
    
    return {
      userInfo,
      userAvatar,
      userDisplayName
    }
  }
}
</script>
```

## ğŸ“Š æ•°æ®ç¤ºä¾‹

### ç®¡ç†å‘˜ç”¨æˆ·
```json
{
  "id": 1,
  "username": "admin",
  "email": "admin@example.com",
  "phone": "13800138000",
  "avatarId": 1,
  "avatarUrl": "https://example.com/avatar/admin.jpg",
  "role": 1,
  "status": true,
  "createTime": "2025-01-01T00:00:00",
  "updateTime": "2025-01-01T00:00:00"
}
```

### æ™®é€šç”¨æˆ·
```json
{
  "id": 5,
  "username": "xhonell",
  "email": "xhonell@163.com",
  "phone": "18996459789",
  "avatarId": 11,
  "avatarUrl": "https://pe-1329896228.cos.ap-chengdu.myqcloud.com/images/3bf592d79f9d4c049d00ecf3b6dd83c2.jpg",
  "role": 2,
  "status": false,
  "createTime": "2025-10-19T23:16:01",
  "updateTime": "2025-10-19T23:16:34"
}
```

## âš™ï¸ å·¥å…·å‡½æ•°

### ç±»å‹å®šä¹‰æ–‡ä»¶
åˆ›å»º `src/types/user.js`ï¼š
```javascript
// è§’è‰²æšä¸¾
export const UserRole = {
  ADMIN: 1,
  USER: 2
}

// è§’è‰²åç§°
export const UserRoleNames = {
  1: 'ç®¡ç†å‘˜',
  2: 'æ™®é€šç”¨æˆ·'
}

// è·å–è§’è‰²åç§°
export function getRoleName(role) {
  return UserRoleNames[role] || 'æœªçŸ¥è§’è‰²'
}

// åˆ¤æ–­æ˜¯å¦ä¸ºç®¡ç†å‘˜
export function isAdmin(role) {
  return role === UserRole.ADMIN
}

// æ ¼å¼åŒ–æ—¶é—´
export function formatTime(time) {
  if (!time) return ''
  const date = new Date(time)
  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`
}

// è·å–çŠ¶æ€æ–‡æœ¬
export function getStatusText(status) {
  return status ? 'æ­£å¸¸' : 'ç¦ç”¨'
}
```

## ğŸ” æƒé™æ§åˆ¶

### åŸºäºè§’è‰²çš„æƒé™
```javascript
// æ£€æŸ¥æ˜¯å¦æœ‰æƒé™
function hasPermission(requiredRole) {
  const userInfo = JSON.parse(localStorage.getItem('userInfo'))
  return userInfo && userInfo.role <= requiredRole
}

// ä½¿ç”¨
if (hasPermission(UserRole.ADMIN)) {
  // æ˜¾ç¤ºç®¡ç†å‘˜åŠŸèƒ½
}
```

### è·¯ç”±å®ˆå«
```javascript
router.beforeEach((to, from, next) => {
  const userInfo = JSON.parse(localStorage.getItem('userInfo'))
  
  if (to.meta.requiresAdmin && userInfo.role !== 1) {
    ElMessage.error('éœ€è¦ç®¡ç†å‘˜æƒé™')
    next(false)
  } else {
    next()
  }
})
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å¤´åƒURL**: å¦‚æœæ²¡æœ‰å¤´åƒURLï¼Œä½¿ç”¨é»˜è®¤å¤´åƒ
2. **è§’è‰²åˆ¤æ–­**: role=1 æ˜¯ç®¡ç†å‘˜ï¼Œrole=2 æ˜¯æ™®é€šç”¨æˆ·
3. **è´¦å·çŠ¶æ€**: status=false è¡¨ç¤ºè´¦å·è¢«ç¦ç”¨
4. **æ—¶é—´æ ¼å¼**: ISO 8601 æ ¼å¼ï¼Œéœ€è¦æ ¼å¼åŒ–åæ˜¾ç¤º
5. **æ•æ„Ÿä¿¡æ¯**: ä¸è¦åœ¨å‰ç«¯å­˜å‚¨å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯

## ğŸ¯ å·²å®ç°åŠŸèƒ½

- âœ… ç™»å½•åè·å–ç”¨æˆ·ä¿¡æ¯
- âœ… ä¿å­˜åˆ° localStorage
- âœ… é¡¶éƒ¨æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
- âœ… é¡¶éƒ¨æ˜¾ç¤ºç”¨æˆ·å
- âœ… ä¸‹æ‹‰èœå•æ˜¾ç¤ºé‚®ç®±
- âœ… é€€å‡ºç™»å½•æ¸…é™¤ç”¨æˆ·ä¿¡æ¯
- âœ… åˆ›å»ºç”¨æˆ·ç±»å‹å®šä¹‰æ–‡ä»¶

## ğŸ“‚ ç›¸å…³æ–‡ä»¶

- `src/layout/index.vue` - é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
- `src/views/login/index.vue` - ç™»å½•åä¿å­˜ç”¨æˆ·ä¿¡æ¯
- `src/types/user.js` - ç”¨æˆ·ç±»å‹å®šä¹‰å’Œå·¥å…·å‡½æ•°
- `src/api/login.js` - è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£

---

**ç”¨æˆ·ä¿¡æ¯å·²å®Œæ•´å¯¹æ¥ï¼** ğŸ‘¤âœ¨

