# è½®æ’­å›¾æ¥å£å¯¹æ¥è¯´æ˜ ğŸ 

## ğŸ“¡ åç«¯æ¥å£ä¿¡æ¯

### æ§åˆ¶å™¨
```java
@RequestMapping("/banner")
@RequiredArgsConstructor
public class BannerController {
    private final BannerService bannerService;

    @GetMapping("/list")
    public Result<PageInfo<BannerResponse>> list(BannerPageRequest request) {
        return Result.success(bannerService.selectList(request));
    }
}
```

### å“åº”å®ä½“
```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Accessors(chain = true)
@JsonInclude(JsonInclude.Include.NON_NULL)
public class BannerResponse implements Serializable {
    private Long id;              // è½®æ’­å›¾ID
    private Long fileId;          // æ–‡ä»¶ID
    private String filePathUrl;   // å›¾ç‰‡åœ°å€
    private String title;         // æ ‡é¢˜
    private Boolean status;       // çŠ¶æ€ï¼ˆtrue:å¯ç”¨, false:ç¦ç”¨ï¼‰
    private LocalDateTime createTime;   // åˆ›å»ºæ—¶é—´
    private LocalDateTime updateTime;   // æ›´æ–°æ—¶é—´
}
```

## ğŸ”— API æ¥å£åˆ—è¡¨

### 1. è·å–è½®æ’­å›¾åˆ—è¡¨
```
GET /banner/list
```

#### è¯·æ±‚å‚æ•°
```javascript
{
  page: 1,           // é¡µç 
  pageSize: 10,      // æ¯é¡µæ•°é‡
  title: '',         // æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰
  status: null       // çŠ¶æ€ï¼ˆå¯é€‰ï¼Œtrue/falseï¼‰
}
```

#### å“åº”æ ¼å¼
```javascript
{
  code: 200,
  message: "æ“ä½œæˆåŠŸ",
  data: {
    total: 10,       // æ€»è®°å½•æ•°
    list: [          // è½®æ’­å›¾åˆ—è¡¨
      {
        id: 1,
        fileId: 100,
        filePathUrl: "https://example.com/banner/1.jpg",
        title: "åº†ç¥å›½åº†",
        status: true,
        createTime: "2025-10-20T22:31:00",
        updateTime: "2025-10-20T22:31:00"
      }
    ],
    pageNum: 1,      // å½“å‰é¡µ
    pageSize: 10,    // æ¯é¡µå¤§å°
    pages: 1         // æ€»é¡µæ•°
  }
}
```

### 2. æ–°å¢è½®æ’­å›¾ï¼ˆé¢„æœŸï¼‰
```
POST /banner/add
```

#### è¯·æ±‚ä½“
```javascript
{
  title: "æ ‡é¢˜",
  fileId: 100,
  status: true
}
```

### 3. æ›´æ–°è½®æ’­å›¾ï¼ˆé¢„æœŸï¼‰
```
PUT /banner/update
```

#### è¯·æ±‚ä½“
```javascript
{
  id: 1,
  title: "æ ‡é¢˜",
  fileId: 100,
  status: true
}
```

### 4. æ›´æ–°çŠ¶æ€ï¼ˆé¢„æœŸï¼‰
```
PUT /banner/status/{id}
```

#### è¯·æ±‚ä½“
```javascript
{
  status: true
}
```

### 5. åˆ é™¤è½®æ’­å›¾ï¼ˆé¢„æœŸï¼‰
```
DELETE /banner/{id}
```

### 6. ä¸Šä¼ å›¾ç‰‡ï¼ˆé¢„æœŸï¼‰
```
POST /upload/image
```

#### è¯·æ±‚æ ¼å¼
```
Content-Type: multipart/form-data
```

#### å“åº”æ ¼å¼
```javascript
{
  fileId: 100,
  fileUrl: "https://example.com/images/xxx.jpg"
}
```

## ğŸ’» å‰ç«¯å®ç°

### API æ¥å£å°è£… (`src/api/banner.js`)

```javascript
import request from '@/utils/request'

// è·å–è½®æ’­å›¾åˆ—è¡¨
export function getBannerList(params) {
  return request({
    url: '/banner/list',
    method: 'get',
    params
  })
}

// æ–°å¢è½®æ’­å›¾
export function addBanner(data) {
  return request({
    url: '/banner/add',
    method: 'post',
    data
  })
}

// æ›´æ–°è½®æ’­å›¾
export function updateBanner(data) {
  return request({
    url: '/banner/update',
    method: 'put',
    data
  })
}

// æ›´æ–°çŠ¶æ€
export function updateBannerStatus(data) {
  return request({
    url: `/banner/status/${data.id}`,
    method: 'put',
    data: { status: data.status }
  })
}

// åˆ é™¤è½®æ’­å›¾
export function deleteBanner(id) {
  return request({
    url: `/banner/${id}`,
    method: 'delete'
  })
}

// ä¸Šä¼ å›¾ç‰‡
export function uploadBannerImage(formData) {
  return request({
    url: '/upload/image',
    method: 'post',
    data: formData,
    headers: {
      'Content-Type': 'multipart/form-data'
    }
  })
}
```

### é¡µé¢å®ç° (`src/views/content/banner.vue`)

#### æ•°æ®åŠ è½½
```javascript
const loadBannerList = async () => {
  loading.value = true
  try {
    const params = {
      page: pagination.page,
      pageSize: pagination.pageSize,
      ...searchForm
    }
    
    const data = await getBannerList(params)
    
    if (data && data.list) {
      bannerList.value = data.list
      pagination.total = data.total
    }
  } catch (error) {
    console.error('è·å–è½®æ’­å›¾åˆ—è¡¨å¤±è´¥ï¼š', error)
  } finally {
    loading.value = false
  }
}
```

#### çŠ¶æ€åˆ‡æ¢
```javascript
const handleStatusChange = async (row) => {
  try {
    await updateBannerStatus({
      id: row.id,
      status: row.status
    })
    ElMessage.success(`è½®æ’­å›¾çŠ¶æ€å·²${row.status ? 'å¯ç”¨' : 'ç¦ç”¨'}`)
  } catch (error) {
    row.status = !row.status  // æ¢å¤åŸçŠ¶æ€
    console.error('æ›´æ–°çŠ¶æ€å¤±è´¥ï¼š', error)
  }
}
```

#### åˆ é™¤æ“ä½œ
```javascript
const handleDelete = (row) => {
  ElMessageBox.confirm(`ç¡®å®šè¦åˆ é™¤è½®æ’­å›¾ "${row.title}" å—ï¼Ÿ`, 'æç¤º')
    .then(async () => {
      await deleteBanner(row.id)
      ElMessage.success('åˆ é™¤æˆåŠŸ')
      loadBannerList()
    })
}
```

#### å›¾ç‰‡ä¸Šä¼ 
```javascript
const handleUpload = async ({ file }) => {
  try {
    const formData = new FormData()
    formData.append('file', file)
    
    const result = await uploadBannerImage(formData)
    
    bannerForm.fileId = result.fileId
    bannerForm.filePathUrl = result.fileUrl
    
    ElMessage.success('å›¾ç‰‡ä¸Šä¼ æˆåŠŸ')
  } catch (error) {
    ElMessage.error('å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•')
  }
}
```

#### æäº¤è¡¨å•
```javascript
const handleSubmit = async () => {
  await bannerFormRef.value.validate()
  submitLoading.value = true

  const data = {
    title: bannerForm.title,
    fileId: bannerForm.fileId,
    status: bannerForm.status
  }

  if (bannerForm.id) {
    data.id = bannerForm.id
    await updateBanner(data)
    ElMessage.success('ç¼–è¾‘æˆåŠŸ')
  } else {
    await addBanner(data)
    ElMessage.success('æ–°å¢æˆåŠŸ')
  }
  
  dialogVisible.value = false
  loadBannerList()
}
```

## ğŸ“Š å­—æ®µå¯¹åº”å…³ç³»

### åç«¯ â†’ å‰ç«¯

| åç«¯å­—æ®µ | å‰ç«¯ä½¿ç”¨ | è¯´æ˜ |
|---------|---------|------|
| `id` | `row.id` | è½®æ’­å›¾ID |
| `fileId` | `bannerForm.fileId` | æ–‡ä»¶IDï¼ˆç”¨äºæäº¤ï¼‰ |
| `filePathUrl` | `row.filePathUrl` | å›¾ç‰‡URLï¼ˆç”¨äºæ˜¾ç¤ºï¼‰ |
| `title` | `row.title` | æ ‡é¢˜ |
| `status` | `row.status` | çŠ¶æ€å¼€å…³ |
| `createTime` | `formatTime(row.createTime)` | åˆ›å»ºæ—¶é—´ |
| `updateTime` | `formatTime(row.updateTime)` | æ›´æ–°æ—¶é—´ |

### è¡¨å•æäº¤æ•°æ®

#### æ–°å¢
```javascript
{
  title: "è½®æ’­å›¾æ ‡é¢˜",
  fileId: 100,
  status: true
}
```

#### ç¼–è¾‘
```javascript
{
  id: 1,
  title: "è½®æ’­å›¾æ ‡é¢˜",
  fileId: 100,
  status: true
}
```

## ğŸ¯ ç®€åŒ–çš„åŠŸèƒ½

åŸºäºåç«¯æä¾›çš„å­—æ®µï¼Œå‰ç«¯è¿›è¡Œäº†ä»¥ä¸‹ç®€åŒ–ï¼š

### ç§»é™¤çš„å­—æ®µ
- âŒ `description`ï¼ˆæè¿°ï¼‰- åç«¯æœªæä¾›
- âŒ `position`ï¼ˆä½ç½®ï¼‰- åç«¯æœªæä¾›
- âŒ `linkUrl`ï¼ˆè·³è½¬é“¾æ¥ï¼‰- åç«¯æœªæä¾›
- âŒ `viewCount`ï¼ˆæµè§ˆé‡ï¼‰- åç«¯æœªæä¾›
- âŒ `clickCount`ï¼ˆç‚¹å‡»é‡ï¼‰- åç«¯æœªæä¾›
- âŒ `sort`ï¼ˆæ’åºï¼‰- åç«¯æœªæä¾›

### ç§»é™¤çš„åŠŸèƒ½
- âŒ ä½ç½®ç­›é€‰
- âŒ æ’åºä¸Šä¸‹ç§»æŒ‰é’®
- âŒ æµè§ˆé‡å’Œç‚¹å‡»é‡ç»Ÿè®¡

### ä¿ç•™çš„æ ¸å¿ƒåŠŸèƒ½
- âœ… è½®æ’­å›¾åˆ—è¡¨å±•ç¤º
- âœ… æ ‡é¢˜æœç´¢
- âœ… çŠ¶æ€ç­›é€‰
- âœ… æ–°å¢è½®æ’­å›¾
- âœ… ç¼–è¾‘è½®æ’­å›¾
- âœ… åˆ é™¤è½®æ’­å›¾
- âœ… çŠ¶æ€åˆ‡æ¢
- âœ… å›¾ç‰‡ä¸Šä¼ 
- âœ… åˆ†é¡µåŠŸèƒ½

## ğŸ“‹ è¡¨æ ¼å­—æ®µ

| åˆ—å | å®½åº¦ | è¯´æ˜ | åŠŸèƒ½ |
|------|------|------|------|
| ID | 80px | è½®æ’­å›¾ID | - |
| é¢„è§ˆ | 200px | å›¾ç‰‡é¢„è§ˆ | ç‚¹å‡»æ”¾å¤§ |
| æ ‡é¢˜ | è‡ªé€‚åº” | è½®æ’­å›¾æ ‡é¢˜ | - |
| åˆ›å»ºæ—¶é—´ | 180px | åˆ›å»ºæ—¶é—´ | æ ¼å¼åŒ–æ˜¾ç¤º |
| æ›´æ–°æ—¶é—´ | 180px | æ›´æ–°æ—¶é—´ | æ ¼å¼åŒ–æ˜¾ç¤º |
| çŠ¶æ€ | 90px | å¯ç”¨/ç¦ç”¨ | å¼€å…³æ§åˆ¶ |
| æ“ä½œ | 200px | æ“ä½œæŒ‰é’® | æŸ¥çœ‹/ç¼–è¾‘/åˆ é™¤ |

## ğŸ¨ æ“ä½œæŒ‰é’®

### 3ä¸ªæ“ä½œæŒ‰é’®

| æŒ‰é’® | é¢œè‰² | å›¾æ ‡ | åŠŸèƒ½ |
|------|------|------|------|
| ğŸ”µ æŸ¥çœ‹ | ç´«è‰²æ¸å˜ | View | æŸ¥çœ‹è¯¦æƒ… |
| ğŸŸ¡ ç¼–è¾‘ | ç²‰è‰²æ¸å˜ | Edit | ç¼–è¾‘è½®æ’­å›¾ |
| ğŸ”´ åˆ é™¤ | æ©™è‰²æ¸å˜ | Delete | åˆ é™¤è½®æ’­å›¾ |

## ğŸ” æœç´¢åŠŸèƒ½

### æœç´¢æ¡ä»¶

| å­—æ®µ | ç±»å‹ | å®½åº¦ | è¯´æ˜ |
|------|------|------|------|
| æ ‡é¢˜ | è¾“å…¥æ¡† | 200px | æ¨¡ç³Šæœç´¢ |
| çŠ¶æ€ | ä¸‹æ‹‰æ¡† | 120px | ç²¾ç¡®åŒ¹é… |

### æœç´¢é€»è¾‘
```javascript
const handleSearch = () => {
  pagination.page = 1  // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
  loadBannerList()     // é‡æ–°åŠ è½½æ•°æ®
}
```

## ğŸ“ è¡¨å•å­—æ®µ

### æ–°å¢/ç¼–è¾‘è½®æ’­å›¾

| å­—æ®µ | ç±»å‹ | å¿…å¡« | éªŒè¯è§„åˆ™ |
|------|------|------|----------|
| æ ‡é¢˜ | æ–‡æœ¬è¾“å…¥ | âœ… æ˜¯ | 2-50å­—ç¬¦ |
| å›¾ç‰‡ | å›¾ç‰‡ä¸Šä¼  | âœ… æ˜¯ | JPG/PNGï¼Œâ‰¤2MB |
| çŠ¶æ€ | å¼€å…³ | âœ… æ˜¯ | true/false |

## ğŸ”§ å›¾ç‰‡ä¸Šä¼ 

### ä¸Šä¼ æµç¨‹
```
1. ç”¨æˆ·é€‰æ‹©å›¾ç‰‡
   â†“
2. beforeUpload éªŒè¯ï¼ˆæ ¼å¼ã€å¤§å°ï¼‰
   â†“
3. handleUpload ä¸Šä¼ åˆ°æœåŠ¡å™¨
   â†“
4. è·å– fileId å’Œ fileUrl
   â†“
5. ä¿å­˜åˆ°è¡¨å•
   â†“
6. æ˜¾ç¤ºé¢„è§ˆ
```

### ä¸Šä¼ é™åˆ¶
- âœ… æ ¼å¼ï¼šJPGã€PNG
- âœ… å¤§å°ï¼šâ‰¤2MB
- âœ… å»ºè®®å°ºå¯¸ï¼š1920x600px

### ä¸Šä¼ ä»£ç 
```javascript
const handleUpload = async ({ file }) => {
  const formData = new FormData()
  formData.append('file', file)
  
  const result = await uploadBannerImage(formData)
  
  bannerForm.fileId = result.fileId        // ä¿å­˜æ–‡ä»¶IDï¼ˆæäº¤ç”¨ï¼‰
  bannerForm.filePathUrl = result.fileUrl   // ä¿å­˜æ–‡ä»¶URLï¼ˆé¢„è§ˆç”¨ï¼‰
}
```

## âš™ï¸ ä»£ç†é…ç½®

### Vite ä»£ç†è®¾ç½®
```javascript
// vite.config.js
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8801',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, '')
      }
    }
  }
})
```

### è¯·æ±‚ç¤ºä¾‹
```javascript
// å‰ç«¯è¯·æ±‚
GET /api/banner/list?page=1&pageSize=10

// å®é™…è¯·æ±‚
GET http://localhost:8801/banner/list?page=1&pageSize=10
```

## ğŸ¯ æ•°æ®æµ

### åˆ—è¡¨åŠ è½½
```
é¡µé¢åŠ è½½ 
  â†’ loadBannerList()
  â†’ getBannerList(params)
  â†’ GET /api/banner/list
  â†’ åç«¯è¿”å› PageInfo<BannerResponse>
  â†’ å‰ç«¯æå– data.list å’Œ data.total
  â†’ æ›´æ–°è¡¨æ ¼å’Œåˆ†é¡µ
```

### çŠ¶æ€åˆ‡æ¢
```
ç‚¹å‡»å¼€å…³
  â†’ handleStatusChange(row)
  â†’ updateBannerStatus({ id, status })
  â†’ PUT /api/banner/status/{id}
  â†’ æˆåŠŸæç¤º
  â†’ å¤±è´¥åˆ™æ¢å¤åŸçŠ¶æ€
```

### åˆ é™¤æ“ä½œ
```
ç‚¹å‡»åˆ é™¤
  â†’ ç¡®è®¤å¯¹è¯æ¡†
  â†’ handleDelete(row)
  â†’ deleteBanner(id)
  â†’ DELETE /api/banner/{id}
  â†’ æˆåŠŸåé‡æ–°åŠ è½½åˆ—è¡¨
```

### æ–°å¢/ç¼–è¾‘
```
å¡«å†™è¡¨å•
  â†’ ä¸Šä¼ å›¾ç‰‡ â†’ è·å– fileId
  â†’ æäº¤è¡¨å•
  â†’ addBanner(data) æˆ– updateBanner(data)
  â†’ POST/PUT /api/banner/add æˆ– /update
  â†’ æˆåŠŸåå…³é—­å¯¹è¯æ¡†
  â†’ é‡æ–°åŠ è½½åˆ—è¡¨
```

## âœ… å¯¹æ¥æ£€æŸ¥æ¸…å•

- [x] åˆ›å»º API æ¥å£æ–‡ä»¶
- [x] å®ç°è·å–åˆ—è¡¨æ¥å£
- [x] å®ç°æ–°å¢æ¥å£
- [x] å®ç°ç¼–è¾‘æ¥å£
- [x] å®ç°åˆ é™¤æ¥å£
- [x] å®ç°çŠ¶æ€æ›´æ–°æ¥å£
- [x] å®ç°å›¾ç‰‡ä¸Šä¼ æ¥å£
- [x] å¯¹æ¥åˆ†é¡µæ•°æ®ï¼ˆPageInfoï¼‰
- [x] å­—æ®µåç§°åŒ¹é…ï¼ˆfilePathUrlï¼‰
- [x] æ—¶é—´æ ¼å¼åŒ–æ˜¾ç¤º
- [x] é”™è¯¯å¤„ç†
- [x] åŠ è½½çŠ¶æ€æ˜¾ç¤º
- [x] æˆåŠŸ/å¤±è´¥æç¤º

## ğŸ“„ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- âœ… `src/api/banner.js` - è½®æ’­å›¾APIæ¥å£
- âœ… `è½®æ’­å›¾æ¥å£å¯¹æ¥è¯´æ˜.md` - æ¥å£å¯¹æ¥æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶
- âœ… `src/views/content/banner.vue` - è½®æ’­å›¾ç®¡ç†é¡µé¢ï¼ˆå¯¹æ¥åç«¯ï¼‰

## ğŸš€ æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨åç«¯
```bash
# ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œåœ¨ 8801 ç«¯å£
java -jar your-backend.jar
```

### 2. å¯åŠ¨å‰ç«¯
```bash
npm run dev
```

### 3. è®¿é—®é¡µé¢
```
http://localhost:3000/content/banner
```

### 4. æµ‹è¯•åŠŸèƒ½
- âœ… åˆ—è¡¨åŠ è½½
- âœ… æœç´¢ç­›é€‰
- âœ… æ–°å¢è½®æ’­å›¾ï¼ˆéœ€è¦ä¸Šä¼ æ¥å£ï¼‰
- âœ… ç¼–è¾‘è½®æ’­å›¾ï¼ˆéœ€è¦æ›´æ–°æ¥å£ï¼‰
- âœ… çŠ¶æ€åˆ‡æ¢ï¼ˆéœ€è¦çŠ¶æ€æ¥å£ï¼‰
- âœ… åˆ é™¤è½®æ’­å›¾ï¼ˆéœ€è¦åˆ é™¤æ¥å£ï¼‰
- âœ… åˆ†é¡µåŠŸèƒ½

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ¥å£å®Œæ•´æ€§
ç›®å‰åªå®ç°äº† `/banner/list` æ¥å£ï¼Œå…¶ä»–æ¥å£ï¼ˆæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ã€çŠ¶æ€æ›´æ–°ã€å›¾ç‰‡ä¸Šä¼ ï¼‰éœ€è¦åç«¯è¡¥å……å®ç°ã€‚

### 2. å›¾ç‰‡ä¸Šä¼ 
éœ€è¦ç¡®è®¤åç«¯å›¾ç‰‡ä¸Šä¼ æ¥å£çš„ï¼š
- URL è·¯å¾„
- è¯·æ±‚æ ¼å¼
- å“åº”æ ¼å¼ï¼ˆfileId å’Œ fileUrl å­—æ®µåï¼‰

### 3. çŠ¶æ€æ›´æ–°
éœ€è¦ç¡®è®¤çŠ¶æ€æ›´æ–°æ¥å£çš„URLå’Œå‚æ•°æ ¼å¼ã€‚

### 4. æ—¶é—´æ ¼å¼
åç«¯è¿”å› `LocalDateTime` æ ¼å¼ï¼Œå‰ç«¯ä½¿ç”¨ `formatTime` å‡½æ•°æ ¼å¼åŒ–ä¸º `YYYY-MM-DD HH:mm` æ ¼å¼ã€‚

## ğŸ’¡ åç»­ä¼˜åŒ–å»ºè®®

### 1. æ‰¹é‡æ“ä½œ
- æ‰¹é‡å¯ç”¨/ç¦ç”¨
- æ‰¹é‡åˆ é™¤

### 2. æ’åºåŠŸèƒ½
- æ‹–æ‹½æ’åº
- ä¸Šä¸‹ç§»åŠ¨

### 3. æ•°æ®ç»Ÿè®¡
- æµè§ˆé‡ç»Ÿè®¡
- ç‚¹å‡»é‡ç»Ÿè®¡

### 4. æ›´å¤šå­—æ®µ
- è·³è½¬é“¾æ¥
- å±•ç¤ºä½ç½®
- è½®æ’­å›¾æè¿°

---

**è½®æ’­å›¾æ¥å£å¯¹æ¥å®Œæˆï¼** ğŸ âœ¨

