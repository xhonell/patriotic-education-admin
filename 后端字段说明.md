# 后端 LoginRequest 字段说明

## 📋 字段定义

### LoginRequest 实体类
```java
public class LoginRequest {
    @Email(message = "邮箱格式不正确")
    @NotBlank(message = "邮箱不能为空")
    private String email;
    
    @NotBlank(message = "密码不能为空")
    @Size(min = 6, max = 20, message = "密码长度应在6-20个字符之间")
    private String password;
}
```

## ✅ 前端对应修改

### 1. 登录表单字段
```javascript
const loginForm = reactive({
  email: 'admin@example.com',     // 改为 email
  password: '123456',
  remember: true
})
```

### 2. 表单验证规则
```javascript
const loginRules = {
  email: [
    { required: true, message: '请输入邮箱', trigger: 'blur' },
    { type: 'email', message: '邮箱格式不正确', trigger: ['blur', 'change'] }
  ],
  password: [
    { required: true, message: '请输入密码', trigger: 'blur' },
    { min: 6, max: 20, message: '密码长度应在6-20个字符之间', trigger: 'blur' }
  ]
}
```

### 3. 登录请求数据
```javascript
const token = await login({
  email: loginForm.email,      // 发送 email 字段
  password: loginForm.password
})
```

## 📤 请求示例

### JSON 格式
```json
{
  "email": "admin@example.com",
  "password": "123456"
}
```

### curl 测试
```bash
curl -X POST http://localhost:8801/admin/login/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "123456"
  }'
```

### Postman 测试
```
POST http://localhost:8801/admin/login/login
Content-Type: application/json

Body (raw JSON):
{
  "email": "admin@example.com",
  "password": "123456"
}
```

## 🔍 字段验证规则

### email 字段
- ✅ **必填**：不能为空
- ✅ **格式**：必须符合邮箱格式（如：user@example.com）
- ✅ **示例**：
  - ✓ `admin@example.com`
  - ✓ `user123@qq.com`
  - ✗ `admin` （格式错误）
  - ✗ `admin@` （格式错误）

### password 字段
- ✅ **必填**：不能为空
- ✅ **长度**：6-20个字符
- ✅ **示例**：
  - ✓ `123456` （6位，符合要求）
  - ✓ `password123` （11位，符合要求）
  - ✗ `12345` （5位，太短）
  - ✗ `123456789012345678901` （21位，太长）

## ⚠️ 常见错误

### 错误1：字段名不匹配
```json
// ❌ 错误：使用 username
{
  "username": "admin",
  "password": "123456"
}

// ✅ 正确：使用 email
{
  "email": "admin@example.com",
  "password": "123456"
}
```

### 错误2：邮箱格式错误
```json
// ❌ 错误：不是邮箱格式
{
  "email": "admin",
  "password": "123456"
}

// ✅ 正确：标准邮箱格式
{
  "email": "admin@example.com",
  "password": "123456"
}
```

### 错误3：密码长度不符
```json
// ❌ 错误：密码太短
{
  "email": "admin@example.com",
  "password": "123"
}

// ✅ 正确：6-20位
{
  "email": "admin@example.com",
  "password": "123456"
}
```

## 📝 后端验证错误信息

### 邮箱相关错误
```json
{
  "code": 400,
  "message": "邮箱不能为空"
}

{
  "code": 400,
  "message": "邮箱格式不正确"
}
```

### 密码相关错误
```json
{
  "code": 400,
  "message": "密码不能为空"
}

{
  "code": 400,
  "message": "密码长度应在6-20个字符之间"
}
```

## ✅ 修改清单

已完成的前端修改：

- [x] 登录表单字段：`username` → `email`
- [x] 输入框类型：`type="email"`
- [x] 图标：`<User />` → `<Message />`
- [x] 占位符：`请输入用户名` → `请输入邮箱`
- [x] 验证规则：添加邮箱格式验证
- [x] 密码验证：`min: 6, max: 20`
- [x] 请求数据：发送 `email` 字段
- [x] LocalStorage：`username` → `email`
- [x] API 注释：更新字段说明

## 🚀 测试步骤

1. **启动后端**（8801端口）
2. **启动前端**：`npm run dev`
3. **打开页面**：http://localhost:3000
4. **输入邮箱**：admin@example.com
5. **输入密码**：123456
6. **点击登录**

### 成功标志
- ✅ 表单验证通过
- ✅ 请求发送成功
- ✅ 返回 token
- ✅ 跳转首页

---

**字段已修改完成，请使用邮箱格式登录！** 📧

